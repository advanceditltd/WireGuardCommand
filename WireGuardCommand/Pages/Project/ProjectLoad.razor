@page "/ProjectLoad"
@{
    var project = ProjectManager.CurrentProject;
}

<div class="container">
    @if (project is not null &&
            project.Metadata is not null)
    {
        if (project.Metadata.IsEncrypted)
        {
            <button class="btn-primary" @onclick="GoBack">Back</button>

            <div>This project is encrypted and requires a passphrase to access.</div>

            <input type="password" @bind-value="ProjectManager.CurrentProject.Passphrase" />
            <button class="btn-primary" @onclick="DecryptProjectAsync">Decrypt</button>

            @if (!string.IsNullOrWhiteSpace(Error))
            {
                <div style="color: red">@Error</div>
            }
        }
        else
        {
            <div>Loading..</div>
        }
    }
    else
    {
        <button class="btn-primary" @onclick="GoBack">Back</button>
        <div>Failed to load project.</div>
    }
</div>